---
# Generated from DITA source
layout: base
title: "Example: Managing links when chunking"
index: "../../toc.html"
---

<nav role="toc" class="col-lg-3"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction</a></li><li><a href="../../archSpec/base/dita-terminology.html">DITA terminology, notation, and conventions</a></li><li><a href="../../archSpec/base/introduction-to-dita.html">Overview of DITA</a></li><li><a href="../../archSpec/base/determining-effective-attribute-values.html">Determining effective attribute values</a></li><li><a href="../../archSpec/base/dita-map-processing.html">DITA map processing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/dita-maps-and-their-usage.html">DITA maps and their usage</a></li><li><a href="../../archSpec/base/subject-scheme-maps-and-usage.html">Subject scheme maps and their usage</a></li><li><a href="../../archSpec/base/map-processing.html">Map cascading</a></li><li><a href="../../archSpec/base/chunking.html">Chunking</a><ul class="nav nav-list"><li><a href="../../archSpec/base/chunk-attribute-overview.html">About the chunk attribute</a></li><li><a href="../../archSpec/base/chunk-attribute-combine.html">Processing chunk="combine"</a></li><li><a href="../../archSpec/base/chunk-attribute-split.html">Processing chunk="split"</a></li><li><a href="../../archSpec/base/chunk-attribute-other-tokens.html">Using the chunk attribute for other purposes</a></li><li><a href="../../archSpec/base/examples-of-chunking.html">Examples of the chunk attribute</a><ul class="nav nav-list"><li><a href="../../archSpec/base/example-chunk-combine-all.html">Example: Using chunk to combine all documents into one</a></li><li><a href="../../archSpec/base/example-chunk-combine-branch.html">Example: Using chunk to render a single document from one branch</a></li><li><a href="../../archSpec/base/example-chunk-combine-group.html">Example: Using chunk to combine a group of topics</a></li><li><a href="../../archSpec/base/example-chunk-combine-nested-topics.html">Example: Using chunk to combine nested documents</a></li><li><a href="../../archSpec/base/example-chunk-split.html">Example: Using chunk to split documents</a></li><li><a href="../../archSpec/base/example-chunk-split-nested.html">Example: Using chunk to split nested documents</a></li><li><a href="../../archSpec/base/example-chunk-ignored.html">Example: When chunk is ignored</a></li><li><a href="../../archSpec/base/example-chunk-combine-within-split.html">Example: Combining topics within a split context</a></li><li class="active"><a href="../../archSpec/base/example-chunk-managing-links.html">Example: Managing links when chunking</a></li></ul></li></ul></li></ul></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration, specialization, generalization, and constraints </a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../langRef/langRef-base.html">Element reference</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/aggregated-RFC-2119-statements.html">Aggregated RFC-2119 statements</a></li><li><a href="../../non-normative/non-normative-information.html">Non-normative information</a></li><li><a href="../../non-normative/revision-history.html">Revision history</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Example: Managing links when chunking</h1>

<div class="body conbody"><p class="shortdesc">Link management with <code class="keyword markupname xmlatt">@chunk</code> is often straightforward; in most cases where
URI-based linking is ambiguous, using indirect links and <code class="keyword markupname xmlatt">@keyref</code> will give the
correct result.</p>
<div class="example"><h2 class="title sectiontitle">Input topics for following examples</h2>

<p class="p">The following map and topics are used for all examples in this topic.</p>
<figure class="fig fignone" id="chunklinking__fig_ys1_hrj_1gb"><figcaption><span class="fig--title-label">Figure 1. </span>input.ditamap</figcaption>

<pre class="pre codeblock"><code>&lt;map&gt;
  &lt;title&gt;Map with chunks and links&lt;/title&gt;

  &lt;keydef href="splitThis.dita" keys="splitThisKey"/&gt;
  &lt;keydef href="splitThis.dita#splitThisChild" keys="splitThisChildKey"/&gt;

  &lt;topicref href="splitThis.dita" chunk="split" keys="explicitSplitKey"/&gt;
  &lt;topicref href="combineThis.dita" keys="combineThisKey"&gt;
    &lt;topicref href="combinedChild.dita" keys="combinedChildKey"/&gt;
  &lt;/topicref&gt;
&lt;/map&gt;
</code></pre>
</figure>
<figure class="fig fignone" id="chunklinking__fig_xcv_hrj_1gb"><figcaption><span class="fig--title-label">Figure 2. </span>Topics used by input.ditamap</figcaption>

<pre class="pre codeblock"><code>splitThis.dita:
&lt;topic id="splitThisRoot"&gt;
  &lt;title&gt;Root topic in split document&lt;/title&gt;
  &lt;!-- ... --&gt;
  &lt;topic id="splitThisChild"&gt;
    &lt;title&gt;Child topic in split document&lt;/title&gt;
    &lt;!-- ... --&gt;
  &lt;/topic&gt;
&lt;/topic&gt;

combineThis.dita:
&lt;topic id="combineThisRoot"&gt;
  &lt;title&gt;Root topic in combined document&lt;/title&gt;
  &lt;!-- ... --&gt;
  &lt;topic id="combineThisChild"&gt;
    &lt;title&gt;Child topic in combined document&lt;/title&gt;
    &lt;!-- ... --&gt;
  &lt;/topic&gt;
&lt;/topic&gt;

combinedChild.dita:
&lt;topic id="combinedChildRoot"&gt;
  &lt;title&gt;Topic in child document, combined with parent&lt;/title&gt;
  &lt;!-- ... --&gt;
&lt;/topic&gt;

</code></pre></figure>
</div>
<div class="example"><h2 class="title sectiontitle">Topics that are rendered only once when publishing</h2>

<div class="p">Assume that the map above is a root map or is used by another map does not otherwise render the
three topic documents. In that case, the following is true:<ul class="ul" id="chunklinking__ul_q3y_wng_thb">
<li class="li"><span class="ph filepath">splitThis.dita</span> is rendered as two documents. For this example, assume a
processor creates two documents with names taken from the topic ID, so that topic becomes
<span class="ph filepath">splitThisRoot.dita</span> and <span class="ph filepath">splitThisChild.dita</span>.</li>
<li class="li">The branch with <span class="ph filepath">combineThis.dita</span> is rendered as one document together with
the content of <span class="ph filepath">combinedChild.dita</span>. For this example, assume a processor merges
the child topic into the file <span class="ph filepath">combineThis.dita</span>.</li>
<li class="li">All links using <code class="ph codeph">href="splitThis.dita"</code>, <code class="ph codeph">keyref="splitThisKey"</code>,
or <code class="ph codeph">keyref="explicitSplitKey"</code> will resolve to
<span class="ph filepath">splitThisRoot.dita</span> (the only rendered instance of that topic).</li>
<li class="li">All links using <code class="ph codeph">href="splitThis.dita#splitThisChild"</code> or
<code class="ph codeph">keyref="splitThisChildKey"</code> will resolve to <span class="ph filepath">splitThisChild.dita</span>
(the only rendered instance of that topic).</li>
<li class="li">All links using <code class="ph codeph">href="combinedChild.dita"</code> or
<code class="ph codeph">keyref="combinedChildKey"</code> will resolve to that topic within
<span class="ph filepath">combineThis.dita</span> (the only rendered instance of that topic).</li>
</ul></div>
</div>
<div class="example"><h2 class="title sectiontitle">Topics that are rendered twice when publishing</h2>

<p class="p">Now assume that the map above is reused in another context that also renders all three topic
documents as originally authored. As a result, each of the three documents in this map
(<span class="ph filepath">splitThis.dita</span>, <span class="ph filepath">combineThis.dita</span>, and
<span class="ph filepath">combinedChild.dita</span>) are rendered more than once.</p>
<div class="p">When each of these documents is rendered twice, the following is true:<ul class="ul" id="chunklinking__ul_hd5_hd1_rhb">
<li class="li">The original source document <span class="ph filepath">splitThis.dita</span> is rendered twice. Based on the
map above, assume a processor creates two documents with names taken from the topic ID, so that
topic becomes <span class="ph filepath">splitThisRoot.dita</span> and <span class="ph filepath">splitThisChild.dita</span>.
At the same time, <span class="ph filepath">splitThis.dita</span> is rendered <em class="ph i">in another context</em> as a
single document, with a different name.</li>
<li class="li">Based on the map above, the branch that starts with the original source document
<span class="ph filepath">combineThis.dita</span> is rendered as one document combined with the content of
<span class="ph filepath">combinedChild.dita</span>. At the same time, those two documents are rendered in
another context as individual documents. For this example, assume a processor generates the combined
document using the generated name <span class="ph filepath">combinThis-2.dita</span>, while the documents
<span class="ph filepath">combineThis.dita</span> and <span class="ph filepath">combinedChild.dita</span> retain their names
in their other context..</li>
<li class="li">All links in this map using the direct URI references <code class="ph codeph">href="splitThis.dita"</code>,
<code class="ph codeph">href="splitThis.dita#splitThisChild"</code>, <code class="ph codeph">href="combineThis.dita"</code>, or
<code class="ph codeph">href="combinedChild.dita"</code> are now ambiguous. They could go to the chunked instance
from this map, or to the individual topics in the other context. Implementations will have to guess
which topic to target: the split or combined instances from this map or versions in the alternate
context from the root map.</li>
<li class="li">All links using indirect key-based references <code class="ph codeph">keyref="splitThisKey"</code> or
<code class="ph codeph">keyref="splitThisChildKey"</code> are also ambiguous, because the key definitions are not
associated explicitly with the chunked or not-chunked instance. If key scopes are used, applications
might more reliably guess that the intended target is the split copy in this map, but this is not
guaranteed.</li>
<li class="li">All links using <code class="ph codeph">keyref="explicitSplitKey"</code>,
<code class="ph codeph">keyref="combinedThisKey"</code>, or <code class="ph codeph">keyref="combinedChildKey"</code> are
unambiguous; they can only resolve to the chunked instance from this submap, because they are
defined directly within the chunk context.</li>
<li class="li">There is no way to unambiguously link to the child document that will result from splitting
<span class="ph filepath">splitThis.dita</span>. This is because it is only possible for the element using
<code class="keyword markupname xmlatt">@chunk</code> to associate a key definition with the first or root topic in the document.
While other key definition elements can be used to associate keys with other topics in the same
document, that can only be done outside of the navigation context that uses <code class="keyword markupname xmlatt">@chunk</code>;
as a result, a processor cannot guarantee whether the intended link target is the split topic from
the <code class="keyword markupname xmlatt">@chunk</code> context, or a use of the same topic in the second context. It is possible
for an implementation to define its own way to resolve this ambiguity; however, if a situation
requires both multiple instances of split topics and unambiguous cross-implementation links to those
split topics, alternate reuse mechanisms need to be considered.</li>
</ul></div>
</div>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../archSpec/base/examples-of-chunking.html" title="These examples illustrate the processing expectations for various scenarios that involve the chunk attribute. The processing examples use either before and after sample markup or expanded syntax that shows the equivalent markup without the chunk attribute.">Examples of the chunk attribute</a></div></div></nav></article></main>
