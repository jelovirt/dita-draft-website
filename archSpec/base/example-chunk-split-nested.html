---
# Generated from DITA source
layout: base
title: 'Example: Using chunk to split nested documents'
description: 'Special attention is necessary when evaluating the map hierarchy that results from
splitting a documents with their own nested topics.'
index: '../../toc.html'
---

<nav role="toc" class="col-lg-3"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction</a></li><li><a href="../../archSpec/base/dita-terminology.html">DITA terminology, notation, and conventions</a></li><li><a href="../../archSpec/base/introduction-to-dita.html">Overview of DITA</a></li><li><a href="../../archSpec/base/determining-effective-attribute-values.html">Determining effective attribute values</a></li><li><a href="../../archSpec/base/dita-map-processing.html">DITA map processing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/dita-maps-and-their-usage.html">DITA maps and their usage</a></li><li><a href="../../archSpec/base/subject-scheme-maps-and-usage.html">Subject scheme maps and their usage</a></li><li><a href="../../archSpec/base/map-processing.html">Map cascading</a></li><li><a href="../../archSpec/base/chunking.html">Chunking</a><ul class="nav nav-list"><li><a href="../../archSpec/base/chunk-attribute-overview.html">About the chunk attribute</a></li><li><a href="../../archSpec/base/chunk-attribute-combine.html">Processing chunk="combine"</a></li><li><a href="../../archSpec/base/chunk-attribute-split.html">Processing chunk="split"</a></li><li><a href="../../archSpec/base/chunk-attribute-other-tokens.html">Using the chunk attribute for other purposes</a></li><li><a href="../../archSpec/base/examples-of-chunking.html">Examples of the chunk attribute</a><ul class="nav nav-list"><li><a href="../../archSpec/base/example-chunk-combine-all.html">Example: Using chunk to combine all documents into one</a></li><li><a href="../../archSpec/base/example-chunk-combine-branch.html">Example: Using chunk to render a single document from one branch</a></li><li><a href="../../archSpec/base/example-chunk-combine-group.html">Example: Using chunk to combine a group of topics</a></li><li><a href="../../archSpec/base/example-chunk-combine-nested-topics.html">Example: Using chunk to combine nested documents</a></li><li><a href="../../archSpec/base/example-chunk-split.html">Example: Using chunk to split documents</a></li><li class="active"><a href="../../archSpec/base/example-chunk-split-nested.html">Example: Using chunk to split nested documents</a></li><li><a href="../../archSpec/base/example-chunk-ignored.html">Example: When chunk is ignored</a></li><li><a href="../../archSpec/base/example-chunk-combine-within-split.html">Example: Combining topics within a split context</a></li><li><a href="../../archSpec/base/example-chunk-managing-links.html">Example: Managing links when chunking</a></li></ul></li></ul></li></ul></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration, specialization, generalization, and constraints </a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../langRef/langRef-base.html">Element reference</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/aggregated-RFC-2119-statements.html">Aggregated RFC-2119 statements</a></li><li><a href="../../non-normative/non-normative-information.html">Non-normative information</a></li><li><a href="../../non-normative/revision-history.html">Revision history</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
<h1 class="title topictitle1" id="ariaid-title1">Example: Using <code class="keyword markupname xmlatt">@chunk</code> to split nested documents</h1>

<div class="body conbody"><p class="shortdesc">Special attention is necessary when evaluating the map hierarchy that results from
splitting a documents with their own nested topics.</p>
<p class="p">Consider the following source map <span class="ph filepath">input.ditamap</span>:</p>
<figure class="fig fignone" id="concept_nl2_m4j_1gb__fig_ol2_m4j_1gb"><figcaption><span class="fig--title-label">Figure 1. </span>Input map without chunking</figcaption>

<pre class="pre codeblock"><code>input.ditamap:
&lt;map chunk="split"&gt;
  &lt;title&gt;Generation example&lt;/title&gt;
  &lt;topicref href="ancestor.dita"&gt;
    &lt;topicref href="middle.dita"&gt;
      &lt;topicref href="child.dita"/&gt;
    &lt;/topicref&gt;
  &lt;/topicref&gt;
&lt;/map&gt;
</code></pre>
</figure>
<p class="p">In this case, the <code class="keyword markupname xmlatt">@chunk</code> attribute instructs a processor to render every topic in
each of the three documents as its own document, while preserving any hierarchy from those
documents. Now consider the following three topic documents, each of which includes nested or peer
topics:</p>
<figure class="fig fignone" id="concept_nl2_m4j_1gb__fig_pl2_m4j_1gb"><figcaption><span class="fig--title-label">Figure 2. </span>Source documents with nested structures</figcaption>

<pre class="pre codeblock"><code>ancestor.dita:
&lt;dita&gt;
  &lt;topic id="ancestor-first"&gt;
    &lt;title&gt;First major topic in ancestor composite doc&lt;/title&gt;
    &lt;!-- ...topic content... --&gt;
  &lt;/topic&gt;
  &lt;!-- more topics in ancestor composite doc --&gt;
  &lt;topic id="ancestor-last"&gt;
    &lt;title&gt;Last major topic in ancestor composite doc&lt;/title&gt;
    &lt;!-- ...topic content... --&gt;
    &lt;topic id="ancestor-last-child"&gt;
      &lt;title&gt;Child of last major topic in ancestor composite doc&lt;/title&gt;
      &lt;!-- ...topic content... --&gt;
    &lt;/topic&gt;
  &lt;/topic&gt;
&lt;/dita&gt;

middle.dita:
&lt;topic id="middle-root"&gt;
  &lt;title&gt;Root topic in middle doc&lt;/title&gt;
  &lt;body&gt;&lt;!-- ... --&gt;&lt;/body&gt;
  &lt;topic id="middle-child"&gt;
    &lt;title&gt;Child of root topic in middle doc&lt;/title&gt;
    &lt;!-- body content --&gt;
  &lt;/topic&gt;
&lt;/topic&gt;

child.dita:
&lt;topic id="child"&gt;
  &lt;title&gt;Small child topic&lt;/title&gt;
  &lt;!-- small child topic content --&gt;
&lt;/topic&gt;</code></pre>
</figure>
<p class="p">When <code class="ph codeph">chunk="split"</code> is evaluated, both <span class="ph filepath">ancestor.dita</span> and
<span class="ph filepath">middle.dita</span> are split and treated as multiple DITA topic documents.
<span class="ph filepath">child.dita</span> is only a single topic and has nothing to split.</p>
<ul class="ul" id="concept_nl2_m4j_1gb__ul_n3y_wng_thb">
<li class="li"><span class="ph filepath">ancestor.dita</span> has a root <code class="keyword markupname xmlelement">&lt;dita&gt;</code> element, so it
results in multiple peer topic references (or branches) in the map. Topic references nested within
the original reference to <span class="ph filepath">ancestor.dita</span> are now located within the reference to
"ancestor-last" (the last topic child of the <code class="keyword markupname xmlelement">&lt;dita&gt;</code> element).</li>
<li class="li"><span class="ph filepath">middle.dita</span> has nested topics, so results in its own new hierarchy within
the map. Content from the nested topic reference is now located within the reference to the root
topic from <span class="ph filepath">middle.dita</span>, but after any references to child topics.</li>
</ul>
<figure class="fig fignone" id="concept_nl2_m4j_1gb__fig_ql2_m4j_1gb"><figcaption><span class="fig--title-label">Figure 3. </span>Equivalent source content </figcaption>

<pre class="pre codeblock"><code>input.ditamap:
&lt;map chunk="split"&gt;
  &lt;title&gt;Generation example&lt;/title&gt;
  &lt;topicref href="ancestor-first.dita"/&gt;
  &lt;!-- more topics in ancestor composite doc --&gt;
  &lt;topicref href="ancestor-last.dita"&gt;
    &lt;topicref href="ancestor-last-child.dita"/&gt;
    &lt;!-- middle.dita now located here, as final child of
         final topic child of &lt;dita&gt; in ancestor.dita --&gt;
    &lt;topicref href="middle-root.dita"&gt;
      &lt;topicref href="middle-child.dita"/&gt;
      &lt;!-- child.dita now located here, as final topic
           child root topic in middle.dita ancestor.dita --&gt;
      &lt;topicref href="child.dita"/&gt;
    &lt;/topicref&gt;
  &lt;/topicref&gt;
&lt;/map&gt;
</code></pre>
</figure>
</div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../archSpec/base/examples-of-chunking.html" title="These examples illustrate the processing expectations for various scenarios that involve the chunk attribute. The processing examples use either before and after sample markup or expanded syntax that shows the equivalent markup without the chunk attribute.">Examples of the chunk attribute</a></div></div></nav></article></main>
