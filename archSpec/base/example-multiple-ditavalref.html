---
# Generated from DITA source
layout: base
title: 'Example: Multiple ditavalref elements on a branch'
description: 'Multiple ditavalref elements can be used on a single map
    branch to create multiple distinct copies of the branch.'
index: '../../toc.html'
---

<nav role="toc" class="col-lg-3"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction</a></li><li><a href="../../archSpec/base/dita-terminology.html">DITA terminology, notation, and conventions</a></li><li><a href="../../archSpec/base/introduction-to-dita.html">Overview of DITA</a></li><li><a href="../../archSpec/base/determining-effective-attribute-values.html">Determining effective attribute values</a></li><li><a href="../../archSpec/base/dita-map-processing.html">DITA map processing</a></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/navigation.html">Navigation</a></li><li><a href="../../archSpec/base/indexes.html">Indexes</a></li><li><a href="../../archSpec/base/conref.html">Content reference (conref)</a></li><li><a href="../../archSpec/base/condproc.html">Conditional processing (profiling)</a></li><li><a href="../../archSpec/base/branch-filtering.html">Branch filtering</a><ul class="nav nav-list"><li><a href="../../archSpec/base/branch-filtering-overview.html">Overview of branch filtering</a></li><li><a href="../../archSpec/base/branch-filtering-single-set.html">Branch filtering: Single condition set for a branch</a></li><li><a href="../../archSpec/base/branch-filtering-multiple-sets.html">Branch filtering: Multiple condition sets for a branch</a></li><li><a href="../../archSpec/base/branch-filtering-resource-names.html">Branch filtering: Impact on resource and key names</a></li><li><a href="../../archSpec/base/branch-filtering-implications-of-processing-order.html">Branch filtering: Implications of processing order</a></li><li><a href="../../archSpec/base/examples-of-branch-filter.html">Examples of branch filtering</a><ul class="nav nav-list"><li><a href="../../archSpec/base/example-single-ditavalref-on-branch.html">Example: Single ditavalref on a branch</a></li><li class="active"><a href="../../archSpec/base/example-multiple-ditavalref.html">Example: Multiple ditavalref elements on a branch</a></li><li><a href="../../archSpec/base/example-ditavalref-as-child-of-map.html">Example: Single ditavalref as a child of map</a></li><li><a href="../../archSpec/base/example-ditavalref-with-mapref.html">Example: Single ditavalref in a reference to a map</a></li><li><a href="../../archSpec/base/example-multiple-ditavalref-as-child-of-map.html">Example: Multiple ditavalref elements as children of map in a root map</a></li><li><a href="../../archSpec/base/example-multiple-ditavalref-with-mapref.html">Example: Multiple ditavalref elements in a reference to a map</a></li><li><a href="../../archSpec/base/example-ditavalref-in-filtered-branch.html">Example: ditavalref within a branch that already uses ditavalref</a></li><li><a href="../../archSpec/base/example-ditavalref-error-conditions.html">Example: ditavalref error conditions</a></li></ul></li></ul></li><li><a href="../../archSpec/base/translation.html">Translation and localization</a></li><li><a href="../../archSpec/base/sort-as-processing.html">Sorting</a></li></ul></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration, specialization, generalization, and constraints </a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../langRef/langRef-base.html">Element reference</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/aggregated-RFC-2119-statements.html">Aggregated RFC-2119 statements</a></li><li><a href="../../non-normative/non-normative-information.html">Non-normative information</a></li><li><a href="../../non-normative/revision-history.html">Revision history</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Example: Multiple <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> elements on a branch</h1>
  
  <div class="body conbody"><p class="shortdesc">Multiple <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> elements can be used on a single map
    branch to create multiple distinct copies of the branch.</p>
    <div class="example" id="example-multiple-ditavalref__mutltiple-ditavalref-create-multiple-branches">
      <p class="p">Consider the following DITA map that contains a branch with three peer
          <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> elements. <span class="ph">Because topics in
          the branch are filtered in three different ways, processors are effectively required to
          handle three copies of the entire branch. Sub-elements within the
            <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> elements are used to control how new resource names
          are constructed for two copies of the branch; one copy (based on the conditions in
            <span class="ph filepath">win.ditaval</span>) is left with the original file names.</span></p>
      <figure class="fig fignone" id="example-multiple-ditavalref__fig_gmm_phj_ln"><figcaption><span class="fig--title-label">Figure 1. </span><span class="ph filepath">input.ditamap</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;map&gt;
  &lt;topicref href="intro.dita"/&gt;
  <strong class="ph b">&lt;!-- Begining of installing branch --&gt;</strong>
  &lt;topicref href="install.dita"&gt;
    &lt;ditavalref href="win.ditaval"/&gt;
    &lt;ditavalref href="mac.ditaval"&gt;
      &lt;ditavalmeta&gt;
        &lt;dvrResourceSuffix&gt;-apple&lt;/dvrResourceSuffix&gt;
      &lt;/ditavalmeta&gt;
    &lt;/ditavalref&gt;
    &lt;ditavalref href="linux.ditaval"&gt;
      &lt;ditavalmeta&gt;
        &lt;dvrResourceSuffix&gt;-linux&lt;/dvrResourceSuffix&gt;
      &lt;/ditavalmeta&gt;
    &lt;/ditavalref&gt;
    &lt;topicref href="do-stuff.dita"&gt;
    &lt;!-- more topics and nested branches --&gt;
      &lt;topicref href="mac-specific-stuff.dita" platform="mac"/&gt;
    &lt;/topicref&gt;
    <strong class="ph b">&lt;!-- End of installing branch --&gt;</strong>
    &lt;topicref href="cleanup.dita"/&gt;
  &lt;/topicref&gt;
&lt;/map&gt;</code></pre>
      </figure>
      <figure class="fig fignone" id="example-multiple-ditavalref__fig_fsm_phj_ln"><figcaption><span class="fig--title-label">Figure 2. </span>Contents of <span class="ph filepath">win.ditaval</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;val&gt;
  &lt;prop att="platform" val="win" action="include"/&gt;
  &lt;prop att="platform" action="exclude"/&gt;
&lt;/val&gt;</code></pre>
      </figure>
      <figure class="fig fignone" id="example-multiple-ditavalref__fig_dym_phj_ln"><figcaption><span class="fig--title-label">Figure 3. </span>Contents of <span class="ph filepath">mac.ditaval</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;val&gt;
  &lt;prop att="platform" val="mac" action="include"/&gt;
  &lt;prop att="platform" action="exclude"/&gt;
&lt;/val&gt;</code></pre>
      </figure>
      <figure class="fig fignone" id="example-multiple-ditavalref__fig_d2n_phj_ln"><figcaption><span class="fig--title-label">Figure 4. </span>Contents of <span class="ph filepath">linux.ditaval</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;val&gt;
  &lt;prop att="platform" val="linux" action="include"/&gt;
  &lt;prop att="platform" action="exclude"/&gt;
&lt;/val&gt;</code></pre>
      </figure>
      <div class="p">When a processor evaluates this markup, it results in three copies of the installing
        branch. The following processing takes place:<ul class="ul">
          <li class="li">The first topic (<span class="ph filepath">intro.dita</span>) is published normally, potentially
            using any other DITAVAL conditions that are specified externally.</li>
          <li class="li">The installing branch appears three times, once for each DITAVAL document. The
            branches are created as follows:<ul class="ul">
              <li class="li">The first branch uses the first DITAVAL document
                (<span class="ph filepath">win.ditaval</span>). Resources use their original names as specified
                in the map. The <span class="ph filepath">mac-specific-stuff.dita</span> topic is removed. The
                resulting branch, with indenting to show the hierarchy, matches the original without
                the mac topic:
                <pre class="pre codeblock"><code>install.dita
   do-stuff.dita
     ...more topics and nested branches...
   cleanup.dita
</code></pre></li>
              <li class="li">The second branch uses the second DITAVAL document
                  (<span class="ph filepath">mac.ditaval</span>). Resources are renamed based on the
                  <code class="keyword markupname xmlelement">&lt;dvrResourceSuffix&gt;</code> element. The
                  <span class="ph filepath">mac-specific-stuff.dita</span> topic is included. The resulting
                branch, with indenting to show the hierarchy, is as follows:
                <pre class="pre codeblock"><code>install-apple.dita
   do-stuff-apple.dita
      mac-specific-stuff-apple.dita
      ...more topics and nested branches...
   cleanup-apple.dita
</code></pre></li>
              <li class="li">The third branch uses the last DITAVAL document
                  (<span class="ph filepath">linux.ditaval</span>). Resources are renamed based on the
                  <code class="keyword markupname xmlelement">&lt;dvrResourceSuffix&gt;</code> element. The
                  <span class="ph filepath">mac-specific-stuff.dita</span> topic is removed. The resulting
                branch, with indenting to show the hierarchy, is as follows:
                <pre class="pre codeblock"><code>install-linux.dita
   do-stuff-linux.dita
     ...more topics and nested branches...
   cleanup-linux.dita
</code></pre></li>
            </ul></li>
        </ul></div>
      <p class="p">The example used three DITAVAL documents to avoid triple maintenance of the installing
        branch in a map; the following map is functionally equivalent, but it requires parallel
        maintenance of each branch.</p>
      <figure class="fig fignone" id="example-multiple-ditavalref__fig_akn_phj_ln"><figcaption><span class="fig--title-label">Figure 5. </span><span class="ph filepath">input.ditamap</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;map&gt;
  &lt;topicref href="intro.dita"/&gt;
  <strong class="ph b">&lt;!-- Windows installing branch --&gt;</strong>
  &lt;topicref href="install.dita"&gt;
    &lt;ditavalref href="win.ditaval"/&gt;
    &lt;topicref href="do-stuff.dita"&gt;
      &lt;!-- more topics and nested branches --&gt;
    &lt;/topicref&gt;
    &lt;topicref href="cleanup.dita"/&gt;
  &lt;/topicref&gt;
  <strong class="ph b">&lt;!-- Mac installing branch --&gt;</strong>
  &lt;topicref href="install.dita"&gt;
    &lt;ditavalref href="mac.ditaval"&gt;
      &lt;ditavalmeta&gt;&lt;dvrResourceSuffix&gt;-apple&lt;/dvrResourceSuffix&gt;&lt;/ditavalmeta&gt;
    &lt;/ditavalref&gt;
    &lt;topicref href="do-stuff.dita"&gt;
      &lt;topicref href="mac-specific-stuff.dita" platform="mac"/&gt;
      &lt;!-- more topics and nested branches --&gt;
    &lt;/topicref&gt;
    &lt;topicref href="cleanup.dita"/&gt;
  &lt;/topicref&gt;
  <strong class="ph b">&lt;!-- Linux installing branch --&gt;</strong>
  &lt;topicref href="install.dita"&gt;
    &lt;ditavalref href="linux.ditaval"&gt;
      &lt;ditavalmeta&gt;&lt;dvrResourceSuffix&gt;-linux&lt;/dvrResourceSuffix&gt;&lt;/ditavalmeta&gt;
    &lt;/ditavalref&gt;
    &lt;topicref href="do-stuff.dita"&gt;
      &lt;!-- more topics and nested branches --&gt;
    &lt;/topicref&gt;
    &lt;topicref href="cleanup.dita"/&gt;
  &lt;/topicref&gt;
  &lt;!-- Several chapters worth of other material --&gt;
&lt;/map&gt;</code></pre>
      </figure>
    </div>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../archSpec/base/examples-of-branch-filter.html" title="The branch filtering examples illustrate the processing expectations for various scenarios that involve ditavalref elements. Processing examples use either before and after sample markup or expanded syntax that shows the equivalent markup without the ditavalref elements.">Examples of branch filtering</a></div></div></nav></article></main>
