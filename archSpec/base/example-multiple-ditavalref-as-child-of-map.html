---
# Generated from DITA source
layout: 'base'
title: 'Example: Multiple ditavalref elements as children of
      map in a root map'
description: 'In this scenario, multiple instances of the ditavalref element
    are specified as direct children of the map element in a root map. This
    is equivalent to setting multiple sets of global filtering conditions for the root
    map.'
index: '../../toc.html'
src: 'archSpec/base/example-multiple-ditavalref-as-child-of-map.dita'
---

<nav role="navigation" class="col-lg-3 toc"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction</a></li><li><a href="../../archSpec/base/dita-terminology.html">DITA terminology, notation, and conventions</a></li><li><a href="../../archSpec/base/introduction-to-dita.html">Overview of DITA</a></li><li><a href="../../archSpec/base/accessibility-and-translation.html">Accessibility and translation</a></li><li><a href="../../archSpec/base/dita-map-processing.html">DITA map processing</a></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/navigation.html">Navigation</a></li><li><a href="../../archSpec/base/indexes.html">Indexes</a></li><li><a href="../../archSpec/base/conref.html">Content reference (conref)</a></li><li><a href="../../archSpec/base/condproc.html">Conditional processing</a></li><li><a href="../../archSpec/base/branch-filtering.html">Branch filtering</a><ul class="nav nav-list"><li><a href="../../archSpec/base/branch-filtering-overview.html">Overview of branch filtering</a></li><li><a href="../../archSpec/base/branch-filtering-interactions.html">How filtering rules interact</a></li><li><a href="../../archSpec/base/branch-filtering-single-set.html">Branch filtering: Single referenced DITAVAL document for a branch</a></li><li><a href="../../archSpec/base/branch-filtering-multiple-sets.html">Branch filtering: Multiple referenced DITAVAL documents for a branch</a></li><li><a href="../../archSpec/base/branch-filtering-resource-names.html">Branch filtering: Impact on resource and key names</a></li><li><a href="../../archSpec/base/branch-filtering-implications-of-processing-order.html">Branch filtering: Implications of processing order</a></li><li><a href="../../archSpec/base/examples-of-branch-filter.html">Examples of branch filtering</a><ul class="nav nav-list"><li><a href="../../archSpec/base/example-single-ditavalref-on-branch.html">Example: Single ditavalref on a branch</a></li><li><a href="../../archSpec/base/example-multiple-ditavalref.html">Example: Multiple ditavalref elements on a branch</a></li><li><a href="../../archSpec/base/example-ditavalref-as-child-of-map.html">Example: Single ditavalref as a child of map</a></li><li><a href="../../archSpec/base/example-ditavalref-with-mapref.html">Example: Single ditavalref in a reference to a map</a></li><li class="active"><a href="../../archSpec/base/example-multiple-ditavalref-as-child-of-map.html">Example: Multiple ditavalref elements as children of map in a root map</a></li><li><a href="../../archSpec/base/example-multiple-ditavalref-with-mapref.html">Example: Multiple ditavalref elements in a reference to a map</a></li><li><a href="../../archSpec/base/example-ditavalref-in-filtered-branch.html">Example: ditavalref within a branch that already uses ditavalref</a></li><li><a href="../../archSpec/base/example-ditavalref-error-conditions.html">Example: ditavalref error conditions</a></li></ul></li></ul></li><li><a href="../../archSpec/base/sort-as-processing.html">Sorting</a></li><li><a href="../../archSpec/base/determining-effective-attribute-values.html">Determining effective attribute values</a></li></ul></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration, specialization, generalization, constraints, and expansion  </a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../langRef/langRef-base.html">Element reference</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/aggregated-RFC-2119-statements.html">Aggregated RFC-2119 statements</a></li><li><a href="../../non-normative/non-normative-information.html">Non-normative information</a></li><li><a href="../../non-normative/revision-history.html">Revision history</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Example: Multiple <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> elements as children of
      <code class="keyword markupname xmlelement">&lt;map&gt;</code> in a root map</h1>
  
  <div class="body conbody"><p class="shortdesc">In this scenario, multiple instances of the <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> element
    are specified as direct children of the <code class="keyword markupname xmlelement">&lt;map&gt;</code> element in a root map. This
    is equivalent to setting multiple sets of global filtering conditions for the root
    map.</p>
    <div class="example" id="example-multiple-ditavalref-as-child-of-map__multiple-ditavalref-as-child-of-map">
      <div class="note note note_note"><span class="note__title">Note:</span> Unlike most other examples of branch filtering, this example cannot be rewritten using a
        single valid map with alternate markup that avoids having multiple
          <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> elements as children of the same grouping element. </div>
      <p class="p">Processing the following root map is equivalent to processing all the contents of the map
        with the conditions in the <span class="ph filepath">mac.ditaval</span> file and again with the
          <span class="ph filepath">linux.ditaval</span> file. If additional conditions are provided externally
        (for example, as a parameter to the publishing process), those global conditions take
        precedence.</p>
      <figure class="fig fignone" id="example-multiple-ditavalref-as-child-of-map__fig_ihb_dfh_1r"><figcaption><span class="fig--title-label">Figure 1. </span><span class="ph filepath">input.ditamap</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;map&gt;
  &lt;title&gt;Setting up my product 
on &lt;keyword platform="mac"&gt;Mac&lt;/keyword&gt;&lt;keyword platform="linux"&gt;Linux&lt;/keyword&gt;&lt;/title&gt;
  &lt;topicmeta&gt;
    &lt;othermeta platform="mac"   name="ProductID" content="1234M"/&gt;
    &lt;othermeta platform="linux" name="ProductID" content="1234L"/&gt;
  &lt;/topicmeta&gt;
  &lt;ditavalref href="mac.ditaval"/&gt;
  &lt;ditavalref href="linux.ditaval"/&gt;
  &lt;!-- lots of content, including relationship tables --&gt;
&lt;/map&gt;</code></pre>
      </figure>
      <figure class="fig fignone" id="example-multiple-ditavalref-as-child-of-map__fig_xpd_2fh_1r"><figcaption><span class="fig--title-label">Figure 2. </span>Contents of <span class="ph filepath">mac.ditaval</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;val&gt;
  &lt;prop att="platform" val="mac"   action="include"/&gt;
  &lt;prop att="platform" val="linux" action="exclude"/&gt;
&lt;/val&gt;</code></pre>
      </figure>
      <figure class="fig fignone" id="example-multiple-ditavalref-as-child-of-map__fig_zwb_hfh_1r"><figcaption><span class="fig--title-label">Figure 3. </span>Contents of <span class="ph filepath">linux.ditaval</span></figcaption>
        
        <pre class="pre codeblock"><code>&lt;val&gt;
  &lt;prop att="platform" val="mac"   action="exclude"/&gt;
  &lt;prop att="platform" val="linux" action="include"/&gt;
&lt;/val&gt;</code></pre>
      </figure>
      <p class="p">Because the title and metadata each contain filterable content, processing using the
        conditions that are referenced by the <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> element results in
        two variants of the title and common metadata. While this cannot be expressed using valid
        DITA markup, it is conceptually similar to something like the following.</p>
      <pre class="pre codeblock"><code>&lt;!-- The following wrapperElement is not a real DITA element.
     It is used here purely as an example to illustrate one possible 
     way of picturing the conditions. --&gt;
&lt;wrapperElement&gt;
  &lt;map&gt;
    &lt;title&gt;Setting up my product on &lt;keyword platform="mac"&gt;Mac&lt;/keyword&gt;&lt;/title&gt;
    &lt;topicmeta&gt;
      &lt;othermeta platform="mac"   name="ProductID" content="1234M"/&gt;
    &lt;/topicmeta&gt;
    &lt;ditavalref href="mac.ditaval"/&gt;
    &lt;!-- lots of content, including relationship tables --&gt;
  &lt;/map&gt;
  &lt;map&gt;
    &lt;title&gt;Setting up my product on &lt;keyword platform="linux"&gt;Linux&lt;/keyword&gt;&lt;/title&gt;
    &lt;topicmeta&gt;
      &lt;othermeta platform="linux" name="ProductID" content="1234L"/&gt;
    &lt;/topicmeta&gt;
    &lt;ditavalref href="linux.ditaval"/&gt;
    &lt;!-- lots of content, including relationship tables --&gt;
  &lt;/map&gt;
&lt;/wrapperElement&gt;</code></pre>
      <p class="p">How this map is rendered is implementation dependent. If this root map is rendered as a
        PDF, possible renditions might include the following:</p>
      <ul class="ul">
        <li class="li">Two PDFs, with one using the conditions from <span class="ph filepath">mac.ditaval</span> and
          another using the conditions from <span class="ph filepath">linux.ditaval</span></li>
        <li class="li">One PDF, with a title page that includes each filtered variant of the title and product
          ID, followed by Mac-specific and Linux-specific renderings of the content as chapters in
          the PDF</li>
        <li class="li">One PDF, with the first set of filter conditions used to set book level titles and
          metadata, followed by content filtered with those conditions, followed by content filtered
          with conditions from the remaining <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> element.</li>
      </ul>
    </div>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../archSpec/base/examples-of-branch-filter.html" title="The branch filtering examples illustrate the processing expectations for various scenarios that involve ditavalref elements. Processing examples use either before and after sample markup or expanded syntax that shows the equivalent markup without the ditavalref elements.">Examples of branch filtering</a></div></div></nav></article></main>
